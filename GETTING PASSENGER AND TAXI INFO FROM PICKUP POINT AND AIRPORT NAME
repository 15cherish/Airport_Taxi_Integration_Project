CREATE OR REPLACE PROCEDURE TAXI_INFO (PPOINT VARCHAR2 , APNAME VARCHAR2) AS
CURSOR PASSINDETAILS is
select p2.FNAME,P2.PASSPORTNO, T1.TAXI_NUMBER, T1.PICKUP_POINT, T1.AP_NAME, T2.DRIVER_ID, T2.DRIVER_NAME
from PASSENGER1 p1,PASSENGER2 p2 ,TAXI1 t1, TAXI2 t2, TAXI3 t3
where P2.PASSPORTNO = P1.PASSPORTNO
AND T3.PID= P1.PID
--AND T3.PASSPORTNO = P1.PASSPORTNO
AND T1.PICKUP_POINT = PPOINT

AND T1.TAXI_NUMBER = T3.TAXI_NUMBER
AND T3.DRIVER_ID = T2.DRIVER_ID
AND T1.AP_NAME = APNAME;

PASSDETAILS PASSINDETAILS %rowtype;
BEGIN
Open PASSINDETAILS ;
LOOP
fetch PASSINDETAILS into PASSDETAILS;
EXIT WHEN PASSINDETAILS%NOTFOUND;
dbms_output.put_line (PASSDETAILS.AP_NAME || '  ' || PASSDETAILS.PICKUP_POINT || '  ' ||
PASSDETAILS.TAXI_NUMBER|| '  ' ||PASSDETAILS.PASSPORTNO || '  ' || PASSDETAILS.DRIVER_ID || ' ' || PASSDETAILS.DRIVER_NAME);
END LOOP;
close PASSINDETAILS;
END;

declare
PPOINT VARCHAR(20);
APNAME VARCHAR(50);
begin

APNAME := 'Chandigarh International Airport';
PPOINT := 'B';
TAXI_INFO(ppoint,apname);
end;
